"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),e&&"object"===("undefined"==typeof o?"undefined":_typeof(o))&&o.image&&(this._image=o.image,this._items=this._getNodes(e),this._show(),this._setup())}return t.prototype._setup=function(){this._performChecks()&&(this._register(),this._init())},t.prototype._checkSelector=function(t){return"string"==typeof t&&t.length},t.prototype._getNodes=function(t){var e=this;if(!this._checkSelector(t)||!this._checkSelector(this._image))return!1;var o=document.querySelectorAll(t);if(!o.length)return!1;var i=[];return this._loopNodes(o,function(t){i.push({parent:t})}),this._loop(i,function(t){t.image=t.parent.querySelector(e._image)}),i},t.prototype._performChecks=function(){return!/iP(ad|hone|od).*OS\s7.*/.test(navigator.userAgent)&&!!requestAnimationFrame},t.prototype._loop=function(t,e){for(var o=0;o<t.length;o++)e(t[o])},t.prototype._loopNodes=function(t,e){return t.length?void this._loop(t,e):void e(t)},t.prototype._show=function(){function t(t){t.style.display="block"}this._items&&this._loop(this._items,function(e){e.image&&t(e.image)})},t.prototype._register=function(){var t=this;this._calculate(),window.addEventListener("resize",function(){return t._calculate()})},t.prototype._getHeight=function(t){return t.getBoundingClientRect().height},t.prototype._calculate=function(){var t=this,e=window.innerHeight;this._items.forEach(function(o){if(o.image){var i=t._getHeight(o.parent),n=o.parent.offsetTop;o.distanceToVisible=n-e,o.height=i,o.offset=o.parent.offsetTop,o.parallaxSpace=t._getHeight(o.image)-i,o.scrollSpace=i+e}})},t.prototype._animate=function(t,e){var o=e>=t.distanceToVisible,i=e>=t.height+t.offset;if(o&&!i){var n=e-t.distanceToVisible,r=n-t.scrollSpace/2,c=t.parallaxSpace/t.scrollSpace,s=(r*c).toFixed(1);t.image.style.transform="translateY("+s*-1+"px"}},t.prototype._tick=function(){var t=this;requestAnimationFrame(function(){var e=window.pageYOffset;t._items.forEach(function(o){return t._animate(o,e)}),t._tick()})},t.prototype._init=function(){this._tick()},t.prototype.recalculate=function(){this._calculate()},t}(),o=function(t,o){return new e(t,o)};"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=o:t.prlx=o}(this);